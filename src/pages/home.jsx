import React from "react";
 
import { BsFillChatSquareQuoteFill } from "react-icons/bs";
import { HiUsers } from "react-icons/hi";
import { FaUsers } from "react-icons/fa";
import DataTable from "../components/datatale";
 import { Navbar, Nav } from "react-bootstrap";
import { useSelector ,useDispatch} from "react-redux";
import {repository} from '../utiles/repository'
import {logout} from '../redux/actionMethodes/User'

export default function Dashboard() {
   const [subscribers, setsubscribers] = React.useState([]);
   const dispatch=useDispatch();
    const token=useSelector(x=>x.token);
  React.useEffect(() => {
    try{
         (async()=>{
            const {data,status} = await repository.users(token)
           setsubscribers(data.data.contactList)
        })()
    }
    catch(e){}
  }, []);

   
  const columns  = [
    {
      name: "Name",
      selector: (row) => row.name,
    },
    {
      name: "Company",
      selector: (row) => row.company,
    },
    {
      name: "Phone",
      selector: (row) => row.phone,
    },
    {
      name: "Email",
      selector: (row) => row.email,
    },
    {
      name: "Message",
      selector: (row) => row.message,
    },
  ];
   
  const handleLogOut = () => {
        dispatch(logout())
  };
  return (
    <div>
      <Navbar bg="light" variant="light" expand="lg">
        <Navbar.Brand href="#home">
          {" "}
          <svg
          width='152'
          height='27'
          viewBox='0 0 152 27'
          fill='none'
          xmlns='http://www.w3.org/2000/svg'
        >
          <path
            d='M57.4965 8.12939V21.8447H55.0672V19.671C54.5039 20.4301 53.7909 21.008 52.9284 21.4048C52.0658 21.8016 51.1152 22 50.0766 22C48.7211 22 47.5065 21.7067 46.4327 21.1201C45.3589 20.5336 44.5139 19.7141 43.8978 18.6617C43.2993 17.5921 43 16.3672 43 14.9871C43 13.6069 43.2993 12.3906 43.8978 11.3383C44.5139 10.2859 45.3589 9.46642 46.4327 8.87985C47.5065 8.29328 48.7211 8 50.0766 8C51.08 8 52.0042 8.18977 52.8491 8.56932C53.6941 8.93161 54.3983 9.47505 54.9616 10.1996V8.12939H57.4965ZM50.2878 19.8262C51.168 19.8262 51.969 19.6279 52.6907 19.2311C53.4125 18.817 53.9758 18.2477 54.3807 17.5231C54.7855 16.7813 54.988 15.9359 54.988 14.9871C54.988 14.0382 54.7855 13.2015 54.3807 12.4769C53.9758 11.7351 53.4125 11.1657 52.6907 10.7689C51.969 10.3721 51.168 10.1738 50.2878 10.1738C49.3901 10.1738 48.5803 10.3721 47.8586 10.7689C47.1544 11.1657 46.5911 11.7351 46.1686 12.4769C45.7637 13.2015 45.5613 14.0382 45.5613 14.9871C45.5613 15.9359 45.7637 16.7813 46.1686 17.5231C46.5911 18.2477 47.1544 18.817 47.8586 19.2311C48.5803 19.6279 49.3901 19.8262 50.2878 19.8262Z'
            fill='#12246C'
          />
          <path
            d='M67.2921 22C65.8662 22 64.59 21.6981 63.4634 21.0943C62.3543 20.4905 61.483 19.6624 60.8492 18.61C60.2155 17.5404 59.8987 16.3327 59.8987 14.9871C59.8987 13.6414 60.2155 12.4424 60.8492 11.39C61.483 10.3204 62.3543 9.4923 63.4634 8.90573C64.59 8.30191 65.8662 8 67.2921 8C68.5596 8 69.6862 8.25015 70.672 8.75046C71.6754 9.25077 72.4499 9.97535 72.9956 10.9242L71.0681 12.1405C70.628 11.4849 70.0823 10.9932 69.4309 10.6654C68.7796 10.3376 68.0579 10.1738 67.2657 10.1738C66.3503 10.1738 65.523 10.3721 64.7836 10.7689C64.0619 11.1657 63.4898 11.7351 63.0673 12.4769C62.6624 13.2015 62.46 14.0382 62.46 14.9871C62.46 15.9532 62.6624 16.8071 63.0673 17.549C63.4898 18.2736 64.0619 18.8343 64.7836 19.2311C65.523 19.6279 66.3503 19.8262 67.2657 19.8262C68.0579 19.8262 68.7796 19.6624 69.4309 19.3346C70.0823 19.0068 70.628 18.5151 71.0681 17.8595L72.9956 19.0499C72.4499 19.9988 71.6754 20.732 70.672 21.2495C69.6862 21.7498 68.5596 22 67.2921 22Z'
            fill='#12246C'
          />
          <path
            d='M81.0706 22C79.6447 22 78.3685 21.6981 77.2419 21.0943C76.1329 20.4905 75.2615 19.6624 74.6278 18.61C73.994 17.5404 73.6772 16.3327 73.6772 14.9871C73.6772 13.6414 73.994 12.4424 74.6278 11.39C75.2615 10.3204 76.1329 9.4923 77.2419 8.90573C78.3685 8.30191 79.6447 8 81.0706 8C82.3381 8 83.4647 8.25015 84.4505 8.75046C85.4539 9.25077 86.2285 9.97535 86.7742 10.9242L84.8466 12.1405C84.4065 11.4849 83.8608 10.9932 83.2094 10.6654C82.5581 10.3376 81.8364 10.1738 81.0442 10.1738C80.1288 10.1738 79.3015 10.3721 78.5621 10.7689C77.8404 11.1657 77.2683 11.7351 76.8458 12.4769C76.4409 13.2015 76.2385 14.0382 76.2385 14.9871C76.2385 15.9532 76.4409 16.8071 76.8458 17.549C77.2683 18.2736 77.8404 18.8343 78.5621 19.2311C79.3015 19.6279 80.1288 19.8262 81.0442 19.8262C81.8364 19.8262 82.5581 19.6624 83.2094 19.3346C83.8608 19.0068 84.4065 18.5151 84.8466 17.8595L86.7742 19.0499C86.2285 19.9988 85.4539 20.732 84.4505 21.2495C83.4647 21.7498 82.3381 22 81.0706 22Z'
            fill='#12246C'
          />
          <path
            d='M102 8.12939V21.8447H99.5971V19.7745C99.0866 20.4818 98.4089 21.0339 97.5639 21.4307C96.7366 21.8102 95.83 22 94.8442 22C92.9782 22 91.5083 21.4997 90.4345 20.4991C89.3607 19.4812 88.8238 17.9889 88.8238 16.0222V8.12939H91.3587V15.7375C91.3587 17.0659 91.6844 18.0752 92.3357 18.7652C92.987 19.4381 93.92 19.7745 95.1346 19.7745C96.4725 19.7745 97.5287 19.3777 98.3033 18.5841C99.0778 17.7905 99.4651 16.6691 99.4651 15.22V8.12939H102Z'
            fill='#12246C'
          />
          <path
            d='M107.389 10.3451C107.822 9.5455 108.462 8.93712 109.31 8.51994C110.159 8.10276 111.189 7.89417 112.4 7.89417V10.319C112.262 10.3016 112.072 10.2929 111.829 10.2929C110.479 10.2929 109.414 10.7014 108.635 11.5184C107.874 12.318 107.493 13.4652 107.493 14.9601V21.8436H105V8.02454H107.389V10.3451Z'
            fill='#48A6C9'
          />
          <path
            d='M127.247 8.02454V21.8436H124.858V19.6534C124.304 20.4182 123.603 21.0005 122.755 21.4003C121.907 21.8001 120.972 22 119.951 22C118.618 22 117.423 21.7045 116.367 21.1135C115.311 20.5225 114.48 19.6968 113.875 18.6365C113.286 17.5588 112.992 16.3246 112.992 14.934C112.992 13.5435 113.286 12.318 113.875 11.2577C114.48 10.1973 115.311 9.37168 116.367 8.78067C117.423 8.18967 118.618 7.89417 119.951 7.89417C120.937 7.89417 121.846 8.08538 122.677 8.46779C123.508 8.83282 124.201 9.38037 124.754 10.1104V8.02454H127.247ZM120.158 19.8098C121.024 19.8098 121.812 19.6099 122.521 19.2101C123.231 18.7929 123.785 18.2193 124.183 17.4893C124.581 16.7418 124.78 15.8901 124.78 14.934C124.78 13.978 124.581 13.135 124.183 12.4049C123.785 11.6575 123.231 11.0838 122.521 10.684C121.812 10.2843 121.024 10.0844 120.158 10.0844C119.276 10.0844 118.479 10.2843 117.77 10.684C117.077 11.0838 116.523 11.6575 116.108 12.4049C115.71 13.135 115.51 13.978 115.51 14.934C115.51 15.8901 115.71 16.7418 116.108 17.4893C116.523 18.2193 117.077 18.7929 117.77 19.2101C118.479 19.6099 119.276 19.8098 120.158 19.8098Z'
            fill='#48A6C9'
          />
          <path
            d='M138.127 21.0353C137.763 21.3482 137.313 21.5915 136.776 21.7653C136.24 21.9218 135.686 22 135.114 22C133.73 22 132.656 21.6263 131.895 20.8788C131.133 20.1314 130.752 19.0624 130.752 17.6718V5H133.245V8.02454H137.192V10.0844H133.245V17.5675C133.245 18.3149 133.427 18.8885 133.79 19.2883C134.171 19.6881 134.708 19.888 135.4 19.888C136.162 19.888 136.811 19.6708 137.348 19.2362L138.127 21.0353Z'
            fill='#48A6C9'
          />
          <path
            d='M145.794 19.8098C147.439 19.8098 148.763 19.2536 149.767 18.1411L151.117 19.7577C150.511 20.4877 149.741 21.044 148.806 21.4264C147.889 21.8088 146.859 22 145.716 22C144.262 22 142.972 21.7045 141.847 21.1135C140.722 20.5051 139.848 19.6621 139.225 18.5844C138.619 17.5066 138.316 16.2899 138.316 14.934C138.316 13.5956 138.61 12.3875 139.199 11.3098C139.804 10.2321 140.627 9.39775 141.665 8.80675C142.721 8.19836 143.907 7.89417 145.223 7.89417C146.469 7.89417 147.603 8.18098 148.624 8.7546C149.646 9.31084 150.459 10.1017 151.065 11.1273C151.671 12.1529 151.983 13.3349 152 14.6733L141.068 16.8114C141.414 17.7674 141.994 18.5061 142.808 19.0276C143.639 19.5491 144.634 19.8098 145.794 19.8098ZM145.223 10.0061C144.357 10.0061 143.578 10.206 142.886 10.6058C142.211 11.0056 141.683 11.5706 141.302 12.3006C140.921 13.0133 140.731 13.8476 140.731 14.8037V15.0644L149.533 13.3957C149.308 12.3875 148.806 11.5706 148.027 10.9448C147.248 10.319 146.313 10.0061 145.223 10.0061Z'
            fill='#48A6C9'
          />
          <path
            fillRule='evenodd'
            clipRule='evenodd'
            d='M17.7413 0.346883C17.2561 -0.16959 16.4163 -0.0992641 16.0237 0.490703L0.193178 24.2833C-0.47659 25.2899 0.731938 26.4832 1.72997 25.8006L16.1494 15.9386L22.8981 22.8622C23.3202 23.2952 24.0126 23.3064 24.4484 22.8872L33.0325 14.6311V16.8477C33.0325 17.3908 33.4728 17.8312 34.016 17.8312C34.5591 17.8312 34.9994 17.3908 34.9994 16.8477V12.1261L34.9995 12.115L34.9994 12.1038V12.0897C34.9994 11.5465 34.5591 11.1062 34.016 11.1062L34.0077 11.1063L33.9995 11.1062L29.4444 11.1062C28.8921 11.1062 28.4444 11.5627 28.4444 12.115C28.4444 12.6672 28.8921 13.1237 29.4444 13.1237L31.7146 13.1237L23.7063 20.826L17.2882 14.2416C16.7794 13.7196 15.9689 13.639 15.3672 14.0505L4.42403 21.535L17.0604 2.54314L21.579 7.35304C21.9571 7.75557 22.59 7.77533 22.9925 7.39719C23.395 7.01904 23.4148 6.38619 23.0366 5.98366L17.7413 0.346883Z'
            fill='#12246C'
          />
        </svg>
     
        </Navbar.Brand>
        <Navbar.Toggle aria-controls="basic-navbar-nav" />
        <Navbar.Collapse id="basic-navbar-nav">
          <Nav className="m-auto"></Nav>
          <Nav className="m-auto"></Nav>
          <Nav className="">
            <button
              onClick={handleLogOut}
              className="btn btn-sign-up fw500 fs18 lh27"
            >
              Logout
            </button>
          </Nav>
        </Navbar.Collapse>
      </Navbar>
      <div className="container">
        <h1 className="fw600 fs32 lh75 mt-4"> Admin Dashboard</h1>

        <div className="mt-5">
          <div className="row m-0">
            <div class="col-md-4 mt-5">
              <div className="fearture-box mr-no-0 m-auto">
                <div className="svg-p bg-svg-2 ">
                  <FaUsers size={45} color="white" />
                </div>
                <h3 className="fs16 lh24 mt-2">Total Requests</h3>
                <h2 className="fw600 fs30 lh45">{subscribers.length}</h2>
              </div>
            </div>
              </div>
        </div>
        <div className="mt-5">
          <div className="row m-0">
            <div className="col-md-12">
              <DataTable
                columns={columns}
                data={subscribers}
                title="Subscribers"
              />
            </div>
             </div>
        </div>
         </div>
    </div>
  );
}
